{% extends "layout.html" %}
{% block title %}{{ title }}{% endblock %}
{% block login %}<a href="/login">Log in</a>{% endblock %}
{% block content %}
<div class="container">
    Admin: <a href="{{ url_for('profile', id=sub.user_id) }}">{{ sub_admin }}</a> 
    <br>
    Created: {{ get_time_ago(sub.created_at) }}
    <p>
        <h2>{{ sub.title }}</h2>
    </p>
    <p>
        {{ sub.content }}
    </p>

    <div>
        <ul class="nav col-12 col-md-auto mb-2 justify-content-center">
            <li>
                <a class="nav-link px-2 link-secondary" href="{{ url_for('new_discussion', id=sub.id) }}">Create discussion</a>
            </li>
            <li>
                <a class="nav-link px-2 link-dark" href="{{ url_for('sub', id=sub.id) }}">Follow</a>
            </li>
        </ul>
    </div>

    <hr>
    
    {% if discussions %}
    {% for discussion in discussions %}
    <div class="container">
        <div>
            <p>
            <small>
            <a href="{{ url_for('profile', id=discussion.user_id) }}">{{ get_user_by_id(discussion.user_id).username }}</a> &#x2022 {{ get_time_ago(discussion.created_at)}}
            </small>
            </p>
        </div>
        <h5><a href="{{ url_for('discussion', sub_id=id, disc_id=discussion.id) }}">{{ discussion.title }}</a></h5>
        <div>
            <small>
                {{ discussion.content }}
            </small>
        </div>
        <hr>
    </div>
    {% endfor %}
    {% else %}
    <div class="d-flex flex-wrap align-items-center justify-content-center" style="height: 400px;">
        <b>No discussions</b>
    </div>
</div>
{% endif %}
{% endblock %}